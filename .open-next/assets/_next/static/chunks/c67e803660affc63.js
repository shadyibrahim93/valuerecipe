(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34359,e=>{"use strict";var t=e.i(91398),r=e.i(91788),l=e.i(30943);function i({allRecipes:e=[],difficultyOptions:i=["easy","medium","hard"],initialTimeRange:a={min:0,max:60},onFilterChange:s}){let[n,c]=(0,r.useState)(""),[d,o]=(0,r.useState)([]),[u,m]=(0,r.useState)(null),[f,h]=(0,r.useState)(a),[v,p]=(0,r.useState)(a.max),[x,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),N=(0,r.useRef)([]),b=e=>{let t=e.ingredients;if("string"==typeof t)try{t=JSON.parse(t)}catch{t=[]}return Array.isArray(t)?t:[]},_=e=>"number"==typeof e.total_time?e.total_time:"number"==typeof e.cook_time?e.cook_time:null;(0,r.useEffect)(()=>{j(!0)},[]),(0,r.useEffect)(()=>(x?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[x]),(0,r.useEffect)(()=>{if(!e.length)return;let t=1/0,r=0;e.forEach(e=>{let l=_(e);"number"==typeof l&&(l<t&&(t=l),l>r&&(r=l))}),t===1/0&&(t=0),0===r&&(r=a.max??60),h({min:t,max:r}),p(r)},[e,a.max]);let w=(0,r.useMemo)(()=>e.length?e.filter(e=>{let t=_(e);if(null!=v&&"number"==typeof t&&t>v)return!1;if(d.length>0){let t=b(e).map(e=>e.image).filter(Boolean);if(!d.every(e=>t.includes(e)))return!1}return!0}):[],[e,d,v]),S=(0,r.useMemo)(()=>{let e={easy:!1,medium:!1,hard:!1};return w.forEach(t=>{let r=t.difficulty?.toLowerCase();r&&void 0!==e[r]&&(e[r]=!0)}),e},[w]),k=(0,r.useMemo)(()=>{let e=new Map,t=w;return u&&(t=t.filter(e=>e.difficulty?.toLowerCase()===u)),t.forEach(t=>{b(t).forEach(t=>{if(!t?.image)return;let r=t.image;e.has(r)||e.set(r,{key:r,label:r.replace(/-/g," ")})})}),Array.from(e.values()).sort((e,t)=>e.label.localeCompare(t.label))},[w,u]),C=(0,r.useMemo)(()=>k.filter(e=>e.label.toLowerCase().includes(n.toLowerCase())),[k,n]);(0,r.useEffect)(()=>{s({ingredients:d,difficulty:u,maxTime:v})},[d,u,v,s]),(0,r.useEffect)(()=>{let e=N.current.map(e=>e.key),t=k.map(e=>e.key);e.filter(e=>!t.includes(e)).forEach(e=>{let t=document.querySelector(`.vr-filter-pill[data-ing="${e}"]`);t&&(t.classList.add("vr-filter-pill--fade-out"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t)},250))}),N.current=k},[k]);let T=(0,t.jsxs)("div",{className:"vr-filter-panel",children:[(0,t.jsxs)("div",{className:"vr-filter-group",children:[(0,t.jsx)("label",{className:"vr-filter-label",children:"Search Ingredients"}),(0,t.jsx)("input",{type:"text",className:"vr-filter-search",placeholder:"Type to filter ingredients...",value:n,onChange:e=>c(e.target.value)})]}),(0,t.jsxs)("div",{className:"vr-filter-group",children:[(0,t.jsx)("label",{className:"vr-filter-label",children:"Ingredients"}),(0,t.jsx)("div",{className:"vr-filter-multiselect",children:C.map(e=>(0,t.jsx)("button",{"data-ing":e.key,className:"vr-filter-pill vr-anim-pill "+(d.includes(e.key)?"vr-filter-pill--active":"")+" vr-filter-pill--fade-in",onClick:()=>o(t=>t.includes(e.key)?t.filter(t=>t!==e.key):[...t,e.key]),children:e.label},e.key))})]}),(0,t.jsxs)("div",{className:"vr-filter-group",children:[(0,t.jsx)("label",{className:"vr-filter-label",children:"Difficulty"}),(0,t.jsx)("div",{className:"vr-filter-multiselect vr-filter-difficulty",children:i.filter(e=>S[e]).map(e=>(0,t.jsx)("button",{className:"vr-filter-pill "+(u===e?"vr-filter-pill--active":""),onClick:()=>m(u===e?null:e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,t.jsxs)("div",{className:"vr-filter-group",children:[(0,t.jsxs)("label",{className:"vr-filter-label",children:["Max Cook Time:",(0,t.jsxs)("span",{className:"vr-filter-label__value",children:[" ",v," min"]})]}),(0,t.jsx)("input",{type:"range",className:"vr-slider",min:f.min,max:f.max,step:"5",value:v,onChange:e=>p(Number(e.target.value))}),(0,t.jsxs)("div",{className:"vr-filter-slider__scale",children:[(0,t.jsxs)("span",{children:[f.min," min"]}),(0,t.jsxs)("span",{children:[f.max," min"]})]})]}),(0,t.jsx)("div",{className:"vr-filter-actions vr-filter-actions--sticky",children:(0,t.jsx)("button",{className:"vr-meal-planner__clear",onClick:()=>{o([]),m(null),c(""),p(f.max),x&&g(!1)},children:"Clear Filter"})})]}),E=y&&x?(0,l.createPortal)((0,t.jsx)("div",{className:"vr-filter-drawer-overlay",children:(0,t.jsxs)("div",{className:"vr-filter-drawer",children:[(0,t.jsxs)("div",{className:"vr-filter-drawer__header",children:[(0,t.jsx)("h3",{children:"Filter Recipes"}),(0,t.jsx)("button",{className:"vr-filter-drawer__close",onClick:()=>g(!1),children:"×"})]}),T]})}),document.body):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"vr-category-mobile-filter",children:(0,t.jsx)("button",{className:"vr-category-mobile-filter__btn",onClick:()=>g(!0),children:"Filters"})}),(0,t.jsxs)("aside",{className:"vr-filter-sidebar vr-filter-sidebar--desktop",children:[(0,t.jsx)("h3",{className:"vr-filter-sidebar__title",children:"Filter"}),T]}),E]})}e.s(["default",()=>i])},38037,e=>{"use strict";var t=e.i(91398),r=e.i(58678),l=e.i(91788),i=e.i(94223),a=e.i(81302),s=e.i(34359);e.i(47221);var n=e.i(30142),c=e.i(67615);function d({initialRecipes:e=[],initialTotalCount:d=0,initialMaxTime:o=60}){let[u,m]=(0,l.useState)(e),[f,h]=(0,l.useState)(d),[v,p]=(0,l.useState)([]),[x,g]=(0,l.useState)({ingredients:[],difficulty:null,maxTime:o}),[y,j]=(0,l.useState)(!1),[N,b]=(0,l.useState)(e.length<d),[_,w]=(0,l.useState)(1),S=(0,l.useRef)(null),k=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=setTimeout(async function(){if(v.length>0)return;let e=new URLSearchParams;e.set("page",1),e.set("per_page",300);try{let t=await fetch(`/api/recipes?${e.toString()}`),r=(await t.json()).data||[];p(r);let l=Math.max(...r.map(e=>e.total_time||e.cook_time||0));l>x.maxTime&&g(e=>({...e,maxTime:l}))}catch(e){console.error("Failed to load filter data",e)}},500);return()=>clearTimeout(e)},[]);let C=async(e,t=!1)=>{let r;j(!0);let l=((r=new URLSearchParams).set("page",e),r.set("per_page",24),x.ingredients.length>0&&r.set("ingredients",x.ingredients.join(",")),x.difficulty&&r.set("difficulty",x.difficulty),x.maxTime&&r.set("max_time",x.maxTime),r.toString());try{let r=await fetch(`/api/recipes?${l}`),i=await r.json(),a=i.data||[];(t||1===e)&&h(i.total_count||i.count||0),m(e=>t?a:[...e,...a]);let s=t?a.length:u.length+a.length,n=i.total_count||i.count||0;a.length<24||n>0&&s>=n?b(!1):b(!0),w(e)}catch(e){console.error("Failed to fetch recipes",e)}finally{j(!1)}},T=(0,l.useRef)(!0);return(0,l.useEffect)(()=>{if(T.current){T.current=!1;return}m([]),w(1),b(!0),S.current&&S.current.scrollIntoView({behavior:"smooth"}),C(1,!0)},[x]),(0,l.useEffect)(()=>{if(!N||y||!k.current)return;let e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(e.unobserve(r.target),C(_+1))},{rootMargin:"200px",threshold:.1});return e.observe(k.current),()=>e.disconnect()},[N,y,_,x]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.default,{children:[(0,t.jsxs)("title",{children:[n.BRAND_NAME," — Discover delightful recipes"]}),(0,t.jsx)("meta",{name:"description",content:"Browse our entire collection of delicious recipes. Filter by ingredients, difficulty, and cooking time."})]}),(0,t.jsxs)("div",{className:"vr-category-layout",children:[(0,t.jsx)(s.default,{allRecipes:v,difficultyOptions:["easy","medium","hard"],initialTimeRange:{min:0,max:60},onFilterChange:g}),(0,t.jsxs)("main",{className:"vr-category-main",id:"trending",ref:S,children:[(0,t.jsxs)("div",{className:"vr-category-main__header",children:[(0,t.jsx)("h3",{className:"vr-category__title",children:"All Recipes"}),(0,t.jsx)("span",{className:"vr-category-main__meta",children:f?`${u.length} out of ${f} recipes loaded`:`${u.length} recipes loaded`})]}),(0,t.jsx)("div",{className:"vr-category__grid",children:u.map((e,r)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{recipe:e},e.id),(r+1)%6==0&&(0,t.jsx)("article",{className:"vr-card vr-recipe-card vr-ad-card-wrapper",children:(0,t.jsx)(a.default,{id:"101",position:"in-feed",height:"100%"})})]}))}),N&&(0,t.jsx)("div",{ref:k,className:"vr-infinite-sentinel",children:y&&(0,t.jsx)("span",{children:"Loading more recipes…"})}),!N&&!y&&u.length>0&&(0,t.jsx)("div",{className:"vr-end-message",children:(0,t.jsx)("span",{children:"You've reached the end of the recipes."})}),0===u.length&&!y&&(0,t.jsx)("div",{className:"vr-empty-state",children:(0,t.jsx)("p",{children:"No recipes match these filters yet. Try adjusting them."})})]}),(0,t.jsx)(c.default,{})]})]})}e.s(["__N_SSG",()=>!0,"default",()=>d])},70442,(e,t,r)=>{let l="/recipes";(window.__NEXT_P=window.__NEXT_P||[]).push([l,()=>e.r(38037)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([l])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/f4fe8aeb8343dcd3.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);