module.exports=[58803,90664,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(1257),e=a.i(52453),f=a.i(41760);function g(a){if(null==a||""===a)return"";let b=Number(a);if(Number.isNaN(b))return"";if(.001>Math.abs(b-Math.round(b)))return String(Math.round(b));let c=Math.floor(b),d=b-c,e={n:0,d:1,error:1/0};for(let a of[2,3,4,6,8,10,12,16]){let b=Math.round(d*a),c=Math.abs(d-b/a);c<e.error-1e-4&&(e={n:b,d:a,error:c})}let f=(a,b)=>0===b?a:f(b,a%b),g=f(e.n,e.d),h=e.n/g,i=e.d/g;return h===i?String(c+1):0===h?String(c):c>0?`${c} ${h}/${i}`:`${h}/${i}`}var h=a.i(38263),i=a.i(10766);function j(a){if(!1!==a.baseUnit&&a.totalAmount>0){let b=g(a.totalAmount);return a.displayUnit?`${b} ${a.displayUnit}`:b}let b=[...new Set(a.lines.map(a=>a.text))];return b.length?b.join(", "):"As needed"}function k(){let{plannerItems:a,checkedIngredients:k,toggleIngredientCheck:l,toggleIncludeIngredients:m,removeRecipeFromPlanner:n,clearPlanner:o}=(0,f.useMealPlanner)(),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(!1),t=(0,c.useRef)(null);(0,c.useEffect)(()=>{function a(a){t.current&&!t.current.contains(a.target)&&s(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[t]),(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{},[p]);let u=(0,c.useMemo)(()=>{let b,c;return b=new Map,c=Math.max(1,p||1),a.forEach(a=>{a.includeIngredients&&(a.ingredients||[]).forEach(d=>{if(!d||!d.ingredient)return;let e=d.ingredient.trim().toLowerCase(),f=k.includes(e);b.has(e)||b.set(e,{ingredient:d.ingredient,image:d.image||null,totalAmount:0,baseUnit:null,displayUnit:null,isChecked:f,lines:[]});let h=b.get(e);h.isChecked=f;let{value:i,fullText:j}=function(a){if(!a)return{value:0,fullText:""};let b=String(a).trim(),c=b.match(/^(\d+\s+\d+\/\d+|(?:\d+\/\d+)|\d+(?:\.\d+)?)\s*(.*)$/);if(!c)return{value:0,fullText:b};let d=c[1],e=c[2]||"",f=0;if(d.includes(" ")&&d.includes("/")){let[a,b]=d.split(" "),[c,e]=b.split("/").map(Number);f=parseFloat(a)+c/e}else if(d.includes("/")){let[a,b]=d.split("/").map(Number);f=b?a/b:0}else f=parseFloat(d);return{value:f,fullText:e}}(d.quantity||""),l=function(a){if(!a)return null;let b=a.replace(/[(),]/g,"").trim().toLowerCase().split(/\s+/);if(0===b.length)return null;let c=b[0],d=new Set(["cup","cups","c","teaspoon","teaspoons","tsp","tsps","t","tablespoon","tablespoons","tbsp","tbsps","T","ounce","ounces","oz","pound","pounds","lb","lbs","gram","grams","g","kilogram","kilograms","kg","milliliter","milliliters","ml","liter","liters","l","pint","pints","pt","quart","quarts","qt","gallon","gallons","gal","clove","cloves","pinch","pinches","dash","dashes","slice","slices","can","cans","package","packages","pkt","piece","pieces"]);return"fluid"===c&&b[1]&&(b[1].startsWith("oz")||b[1].startsWith("ounce"))?"fl oz":d.has(c)?c:null}(j),m="";if(i>0){let a=i*c,b=g(a);m=j?`${b} ${j}`:b,null===h.baseUnit&&0===h.totalAmount?(h.baseUnit=l,h.displayUnit=j,h.totalAmount=a):h.baseUnit===l?h.totalAmount+=a:h.baseUnit=!1}else m=j||"As needed",h.baseUnit=!1;h.lines.push({recipeTitle:a.title,text:m})})}),Array.from(b.values()).sort((a,b)=>a.ingredient.localeCompare(b.ingredient))},[a,p,k]),v=a.length>0,w=()=>{let b=u.filter(a=>a.isChecked),c=u.filter(a=>!a.isChecked),d=`Meal Planner Shopping List (${p} serving${1===p?"":"s"})`,e=`${d}

Link: ${window.location.href}

`;return e+=`[ITEMS TO BUY]
`,e+=c.length?c.map(a=>`[ ] ${a.ingredient}: ${j(a)}`).join("\n"):"• None - you have everything!",e+=`

[ALREADY HAVE]
`,e+=b.length?b.map(a=>`[x] ${a.ingredient}: ${j(a)}`).join("\n"):"• None yet",e+=`

[RECIPES INCLUDED]
`,a.forEach(a=>{e+=`${a.includeIngredients?"[x]":"[ ]"} ${a.title}
`}),{title:d,text:e}},x=async()=>{let{text:a}=w();try{await navigator.clipboard.writeText(a),alert("Meal plan copied to clipboard!")}catch(a){console.error("Copy failed",a)}s(!1)},y=async()=>{let{title:a,text:b}=w();try{navigator.share?await navigator.share({title:a,text:b}):x()}catch(a){console.error("Share failed",a)}s(!1)},z=a=>{q(b=>Math.max(1,(b||1)+a))};return(0,b.jsxs)("div",{className:"vr-card vr-meal-planner",children:[(0,b.jsxs)("div",{className:"vr-section-header",style:{position:"relative"},children:[(0,b.jsx)("h4",{className:"vr-section-title",children:"Meal Planner"}),v&&(0,b.jsxs)("div",{className:"vr-planner-menu-container",ref:t,children:[(0,b.jsx)("button",{type:"button",className:"vr-icon-btn vr-icon-btn--menu",onClick:()=>s(!r),children:(0,b.jsx)(e.FiMoreVertical,{})}),r&&(0,b.jsxs)("div",{className:"vr-planner-dropdown",children:[(0,b.jsxs)("button",{type:"button",onClick:x,children:[(0,b.jsx)(e.FiCopy,{})," Copy Plan"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{s(!1),window.print()},children:[(0,b.jsx)(e.FiPrinter,{})," Print Plan"]}),(0,b.jsxs)("button",{type:"button",onClick:y,children:[(0,b.jsx)(e.FiShare2,{})," Share Plan"]})]})]})]}),!v&&(0,b.jsx)("div",{className:"vr-meal-planner__empty",children:(0,b.jsx)("p",{children:"No recipes added yet."})}),v&&(0,b.jsxs)("div",{className:"vr-print-area",children:[(0,b.jsxs)("div",{className:"vr-print-header",children:[(0,b.jsx)("h1",{children:"Shopping List"}),(0,b.jsxs)("p",{children:["Generated by ",i.BRAND_NAME," • ",new Date().toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"vr-meal-planner__controls no-print",children:(0,b.jsxs)("div",{className:"vr-meal-planner__servings",children:[(0,b.jsx)("h5",{className:"vr-meal-planner__subheading",children:"Servings"}),(0,b.jsxs)("div",{className:"vr-meal-planner__servings-controls",children:[(0,b.jsx)("button",{type:"button",className:"vr-meal-planner__servings-btn",onClick:()=>z(-1),children:"−"}),(0,b.jsx)("input",{type:"number",min:1,max:99,value:p,onChange:a=>{let b=Number(a.target.value);Number.isNaN(b)||q(Math.min(99,Math.max(1,b)))},className:"vr-meal-planner__servings-input"}),(0,b.jsx)("button",{type:"button",className:"vr-meal-planner__servings-btn",onClick:()=>z(1),children:"+"})]})]})}),(0,b.jsxs)("div",{className:"vr-meal-planner__recipes",children:[(0,b.jsx)("h5",{className:"vr-meal-planner__subheading",children:"Planned recipes"}),(0,b.jsx)("ul",{children:a.map(a=>(0,b.jsx)("li",{className:"vr-meal-planner__recipe",children:(0,b.jsx)("div",{className:"vr-meal-planner__recipe-main",children:(0,b.jsxs)("div",{className:"vr-meal-planner__recipe-info",children:[(0,b.jsx)("label",{className:"vr-meal-planner__include",children:(0,b.jsx)("input",{type:"checkbox",checked:a.includeIngredients,onChange:()=>m(a.id)})}),(0,b.jsx)(d.default,{href:`/recipes/${a.slug||a.id}`,children:(0,b.jsx)("span",{className:"vr-meal-planner__recipe-title","data-print-check":a.includeIngredients?"[x]":"[ ]",children:a.title})}),(0,b.jsx)("button",{className:"vr-meal-planner__remove no-print",onClick:()=>n(a.id),children:"×"})]})})},a.id))})]}),(0,b.jsxs)("div",{className:"vr-meal-planner__ingredients",children:[(0,b.jsx)("h5",{className:"vr-meal-planner__subheading",children:"Combined ingredients"}),u.length>0?(0,b.jsx)("div",{className:"vr-meal-planner__ingredient-list",children:u.map(a=>(0,b.jsxs)("div",{className:"vr-meal-planner__ingredient-item",style:{position:"relative"},children:[(0,b.jsx)("div",{className:`vr-ingredient-check ${a.isChecked?"checked":""}`,onClick:()=>l(a.ingredient),children:"✓"}),(0,b.jsx)("div",{className:"vr-meal-planner__ingredient-media no-print",children:(0,b.jsx)(h.default,{src:a.image?`/images/ingredients/${a.image}.webp`:"/images/ingredients/placeholder.webp",alt:a.ingredient,width:46,height:46})}),(0,b.jsxs)("div",{className:"vr-meal-planner__ingredient-body",children:[(0,b.jsxs)("div",{className:"vr-meal-planner__ingredient-top",children:[(0,b.jsx)("span",{className:"vr-meal-planner__ingredient-name",children:a.ingredient}),(0,b.jsx)("span",{className:"vr-meal-planner__ingredient-total",children:j(a)})]}),(0,b.jsx)("div",{className:"vr-meal-planner__ingredient-notes",children:a.lines.length>1&&(0,b.jsxs)("span",{children:["From:"," ",a.lines.map(a=>a.recipeTitle).join(", ")]})})]})]},a.ingredient))}):(0,b.jsx)("div",{className:"vr-meal-planner__empty",children:(0,b.jsx)("p",{children:"No ingredients selected."})})]}),(0,b.jsx)("div",{className:"vr-meal-planner__footer no-print",children:(0,b.jsxs)("button",{type:"button",className:"vr-meal-planner__clear",onClick:o,children:[(0,b.jsx)(e.FiTrash2,{})," ",(0,b.jsx)("span",{children:"Clear planner"})]})})]})]})}a.s(["default",()=>k],90664);var l=a.i(20351);a.s(["default",0,()=>(0,b.jsxs)("aside",{className:"vr-sidebar",children:[(0,b.jsx)(k,{}),(0,b.jsx)(l.default,{id:"101",position:"sidebar",placement:"sticky",height:"auto"})]})],58803)},65490,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(10766),i=a.i(19059),j=a.i(41910),k=a.i(27669),l=a.i(49190),m=a.i(31735),n=a.i(27622),o=a.i(1257),p=a.i(20351),q=a.i(58803);async function r(){let{data:a}=await l.supabase.from("recipes").select("id, title, slug, image_url, rating, rating_count, total_time, cook_time, difficulty, serving_time, cuisine").order("rating",{ascending:!1}).order("rating_count",{ascending:!1}).limit(11);return{props:{initialTrending:a||[]},revalidate:h.REVALIDATE_TIME}}function s({initialTrending:a=[]}){let{q:b}=(0,j.useRouter)().query,[c,d]=(0,k.useState)([]),[e,f]=(0,k.useState)(!1);(0,k.useEffect)(()=>{b?(f(!0),fetch(`/api/search?q=${encodeURIComponent(b)}`).then(a=>a.json()).then(a=>{d(a.data||[]),f(!1)}).catch(()=>f(!1))):d([])},[b]);let l=b?`Search results for "${b}" — ${h.BRAND_NAME}`:`Search recipes — ${h.BRAND_NAME}`,r=b?`Browse recipe results for "${b}" on ${h.BRAND_NAME}. Discover curated recipes by ingredients, cuisine, and more.`:`Search thousands of recipes on ${h.BRAND_NAME} by keyword, ingredients, cuisine, and more.`,s=(0,k.useMemo)(()=>b?`recipe search, search recipes, ${b}, ${h.BRAND_NAME}`:`recipe search, search recipes, ${h.BRAND_NAME}`,[b]),t=b?`${h.BRAND_URL}/search?q=${encodeURIComponent(b)}`:`${h.BRAND_URL}/search`,u={"@context":"https://schema.org","@type":"SearchResultsPage",name:l,description:r,url:t,potentialAction:{"@type":"SearchAction",target:`${h.BRAND_URL}/search?q={search_term_string}`,"query-input":"required name=search_term_string"}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.default,{children:[(0,g.jsx)("title",{children:l}),(0,g.jsx)("meta",{name:"description",content:r}),(0,g.jsx)("meta",{name:"keywords",content:s}),(0,g.jsx)("meta",{name:"author",content:`${h.BRAND_NAME} Editorial Team`}),(0,g.jsx)("meta",{name:"publisher",content:h.BRAND_NAME}),(0,g.jsx)("link",{rel:"canonical",href:t}),(0,g.jsx)("meta",{property:"og:title",content:l}),(0,g.jsx)("meta",{property:"og:description",content:r}),(0,g.jsx)("meta",{property:"og:type",content:"website"}),(0,g.jsx)("meta",{property:"og:url",content:t}),(0,g.jsx)("meta",{property:"og:image",content:`${h.BRAND_URL}/images/og-search.webp`}),(0,g.jsx)("meta",{property:"og:site_name",content:h.BRAND_NAME}),(0,g.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,g.jsx)("meta",{name:"twitter:title",content:l}),(0,g.jsx)("meta",{name:"twitter:description",content:r}),(0,g.jsx)("meta",{name:"twitter:image",content:`${h.BRAND_URL}/images/og-search.webp`}),(0,g.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(u)}})]}),(0,g.jsxs)("div",{className:"vr-home-layout",children:[(0,g.jsxs)("div",{className:"vr-category__container",children:[(0,g.jsxs)("div",{className:"vr-card",children:[(0,g.jsx)("h1",{className:"vr-category__title",children:b?`Search results for "${b}"`:"Search recipes"}),e?(0,g.jsx)("p",{className:"vr-search-results__empty",children:"Searching…"}):c.length>0?(0,g.jsx)("div",{className:"vr-category__grid",children:c.map((a,b)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.default,{recipe:a},a.id),(b+1)%6==0&&(0,g.jsx)("article",{className:"vr-card vr-recipe-card vr-ad-card-wrapper",children:(0,g.jsx)(p.default,{id:"101",position:"in-feed",height:"100%"})})]}))}):(0,g.jsx)("p",{className:"vr-search-results__empty",children:b?`No recipes found for "${b}". Try checking the trending recipes below.`:"Enter a keyword above to find delicious recipes."})]}),(0,g.jsx)("div",{className:"vr-card",children:(0,g.jsx)(n.default,{})}),(0,g.jsx)("div",{className:"vr-card",children:(0,g.jsxs)("div",{className:"vr-section",children:[(0,g.jsxs)("div",{className:"vr-category__header",children:[(0,g.jsx)("h3",{className:"vr-category__title",children:"Trending Recipes"}),(0,g.jsx)(o.default,{href:"/recipes",className:"vr-category__link",children:"View all recipes →"})]}),(0,g.jsx)("div",{className:"vr-category__grid",children:a.map((a,b)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.default,{recipe:a},a.id),(b+1)%6==0&&(0,g.jsx)("article",{className:"vr-card vr-recipe-card vr-ad-card-wrapper",children:(0,g.jsx)(p.default,{id:"101",position:"in-feed",height:"100%"})})]}))})]})})]}),(0,g.jsx)(q.default,{})]})]})}a.s(["default",()=>s,"getStaticProps",()=>r],14783);var t=a.i(14783),u=a.i(9193);let v=(0,d.hoist)(t,"default"),w=(0,d.hoist)(t,"getStaticProps"),x=(0,d.hoist)(t,"getStaticPaths"),y=(0,d.hoist)(t,"getServerSideProps"),z=(0,d.hoist)(t,"config"),A=(0,d.hoist)(t,"reportWebVitals"),B=(0,d.hoist)(t,"unstable_getStaticProps"),C=(0,d.hoist)(t,"unstable_getStaticPaths"),D=(0,d.hoist)(t,"unstable_getStaticParams"),E=(0,d.hoist)(t,"unstable_getServerProps"),F=(0,d.hoist)(t,"unstable_getServerSideProps"),G=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/search",pathname:"/search",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:t}),H=(0,u.getHandler)({srcPage:"/search",config:z,userland:t,routeModule:G,getStaticPaths:x,getStaticProps:w,getServerSideProps:y});a.s(["config",0,z,"default",0,v,"getServerSideProps",0,y,"getStaticPaths",0,x,"getStaticProps",0,w,"handler",0,H,"reportWebVitals",0,A,"routeModule",0,G,"unstable_getServerProps",0,E,"unstable_getServerSideProps",0,F,"unstable_getStaticParams",0,D,"unstable_getStaticPaths",0,C,"unstable_getStaticProps",0,B],65490)}];

//# sourceMappingURL=_c247e9a7._.js.map