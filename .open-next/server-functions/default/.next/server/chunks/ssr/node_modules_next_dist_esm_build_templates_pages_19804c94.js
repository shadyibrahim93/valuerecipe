module.exports=[81174,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(19059),i=a.i(41910),j=a.i(27669),k=a.i(49190),l=a.i(31735),m=a.i(98749),n=a.i(51749),o=a.i(20351),p=a.i(10766),q=a.i(58803);async function r(){return{paths:[],fallback:"blocking"}}async function s({params:a}){let{slug:b}=a,c="trending"===b,d=decodeURIComponent(b),e=k.supabase.from("recipes").select("*",{count:"exact"});e=c?e.order("rating_count",{ascending:!1}).order("rating",{ascending:!1}):e.ilike("cuisine",d);let{data:f,count:g,error:h}=await e.range(0,23);if(h)return console.error(`ISR Error for slug "${d}":`,h.message),{notFound:!0};let i=k.supabase.from("recipes").select("total_time, cook_time");c||(i=i.ilike("cuisine",d));let{data:j}=await i.limit(100);return{props:{slug:d,isTrending:c,initialRecipes:f||[],initialTotalCount:g||0,initialMaxTime:j?Math.max(...j.map(a=>a.total_time||a.cook_time||0)):60},revalidate:p.REVALIDATE_TIME||3600}}function t({slug:a,isTrending:b,initialRecipes:c=[],initialTotalCount:d=0,initialMaxTime:e=60}){let f=(0,i.useRouter)(),[k,r]=(0,j.useState)(c),[s,t]=(0,j.useState)(d),[u,v]=(0,j.useState)([]),[w,x]=(0,j.useState)({ingredients:[],difficulty:null,maxTime:e}),[y,z]=(0,j.useState)(!1),[A,B]=(0,j.useState)(c.length<d),[C,D]=(0,j.useState)(1),E=(0,j.useRef)(null),F=(0,j.useRef)(null),G=b?"Trending Recipes":(a?a.charAt(0).toUpperCase()+a.slice(1):"")+" Recipes",H=`/images/categories/${a?.toLowerCase()}-category.webp`;(0,j.useEffect)(()=>{r(c),t(d),x(a=>({...a,maxTime:e,ingredients:[],difficulty:null})),D(1),B(c.length<d),v([])},[a,c]),(0,j.useEffect)(()=>{let c=setTimeout(async function(){if(!a||u.length>0)return;let c=new URLSearchParams;c.set("page",1),c.set("per_page",300),b||c.set("cuisine",a);try{let a=await fetch(`/api/recipes?${c.toString()}`),b=(await a.json()).data||[];v(b);let d=Math.max(...b.map(a=>a.total_time||a.cook_time||0));d>w.maxTime&&x(a=>({...a,maxTime:d}))}catch(a){console.error("Failed to load filter data",a)}},500);return()=>clearTimeout(c)},[a,b]);let I=async(c,d=!1)=>{let e;z(!0);let f=((e=new URLSearchParams).set("page",c),e.set("per_page",24),!b&&a&&e.set("cuisine",a),w.ingredients.length>0&&e.set("ingredients",w.ingredients.join(",")),w.difficulty&&e.set("difficulty",w.difficulty),w.maxTime&&e.set("max_time",w.maxTime),e.toString());try{let a=await fetch(`/api/recipes?${f}`),b=await a.json(),e=b.data||[];(d||1===c)&&t(b.total_count||b.count||0),r(a=>d?e:[...a,...e]);let g=d?e.length:k.length+e.length,h=b.total_count||b.count||0;e.length<24||h>0&&g>=h?B(!1):B(!0),D(c)}catch(a){console.error(a)}finally{z(!1)}},J=(0,j.useRef)(!0);return((0,j.useEffect)(()=>{if(J.current){J.current=!1;return}r([]),D(1),B(!0),E.current?.scrollIntoView({behavior:"smooth"}),I(1,!0)},[w]),(0,j.useEffect)(()=>{if(!A||y||!F.current)return;let a=new IntersectionObserver(b=>{b[0].isIntersecting&&(a.unobserve(b[0].target),I(C+1))},{rootMargin:"200px",threshold:.1});return a.observe(F.current),()=>a.disconnect()},[A,y,C,w,a]),f.isFallback)?(0,g.jsx)("div",{className:"vr-container",children:"Loading..."}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.default,{children:[(0,g.jsxs)("title",{children:[G," | ",p.BRAND_NAME]}),(0,g.jsx)("meta",{name:"description",content:`Browse delicious ${G} at ${p.BRAND_NAME}. Find easy, top-rated recipes.`})]}),(0,g.jsx)(m.default,{}),(0,g.jsxs)("div",{className:"vr-category-hero",children:[(0,g.jsx)("img",{src:H,onError:a=>{a.target.onerror=null,a.target.src="/images/hero-banner2.webp"},alt:G,className:"vr-category-hero__image"}),(0,g.jsx)("div",{className:"vr-category-hero__overlay",children:(0,g.jsx)("h1",{className:"vr-category-hero__title",children:G})})]}),(0,g.jsxs)("div",{className:"vr-category-layout",children:[(0,g.jsx)(n.default,{allRecipes:u,difficultyOptions:["easy","medium","hard"],initialTimeRange:{min:0,max:60},onFilterChange:x}),(0,g.jsxs)("main",{className:"vr-category-main",ref:E,children:[(0,g.jsxs)("div",{className:"vr-category-main__header",children:[(0,g.jsx)("h3",{className:"vr-category__title",children:G}),(0,g.jsx)("span",{className:"vr-category-main__meta",children:s?`${k.length} out of ${s} recipes loaded`:`${k.length} recipes loaded`})]}),(0,g.jsx)("div",{className:"vr-category__grid",children:k.map((a,b)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.default,{recipe:a},a.id),(b+1)%6==0&&(0,g.jsx)("article",{className:"vr-card vr-recipe-card vr-ad-card-wrapper",children:(0,g.jsx)(o.default,{id:"101",position:"in-feed",height:"100%"})})]}))}),A&&(0,g.jsx)("div",{ref:F,className:"vr-infinite-sentinel",children:y&&(0,g.jsx)("span",{children:"Loading more recipesâ€¦"})}),!A&&k.length>0&&(0,g.jsx)("div",{className:"vr-infinite-sentinel",children:(0,g.jsx)("span",{children:"You've reached the end!"})})]}),(0,g.jsx)(q.default,{})]})]})}a.s(["default",()=>t,"getStaticPaths",()=>r,"getStaticProps",()=>s],49);var u=a.i(49),v=a.i(9193);let w=(0,d.hoist)(u,"default"),x=(0,d.hoist)(u,"getStaticProps"),y=(0,d.hoist)(u,"getStaticPaths"),z=(0,d.hoist)(u,"getServerSideProps"),A=(0,d.hoist)(u,"config"),B=(0,d.hoist)(u,"reportWebVitals"),C=(0,d.hoist)(u,"unstable_getStaticProps"),D=(0,d.hoist)(u,"unstable_getStaticPaths"),E=(0,d.hoist)(u,"unstable_getStaticParams"),F=(0,d.hoist)(u,"unstable_getServerProps"),G=(0,d.hoist)(u,"unstable_getServerSideProps"),H=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/categories/[slug]",pathname:"/categories/[slug]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:u}),I=(0,v.getHandler)({srcPage:"/categories/[slug]",config:A,userland:u,routeModule:H,getStaticPaths:y,getStaticProps:x,getServerSideProps:z});a.s(["config",0,A,"default",0,w,"getServerSideProps",0,z,"getStaticPaths",0,y,"getStaticProps",0,x,"handler",0,I,"reportWebVitals",0,B,"routeModule",0,H,"unstable_getServerProps",0,F,"unstable_getServerSideProps",0,G,"unstable_getStaticParams",0,E,"unstable_getStaticPaths",0,D,"unstable_getStaticProps",0,C],81174)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_19804c94.js.map