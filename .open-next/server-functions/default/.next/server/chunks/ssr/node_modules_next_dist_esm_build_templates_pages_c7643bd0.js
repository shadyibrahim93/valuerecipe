module.exports=[25854,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(19059),i=a.i(27669);function j(){let[a,b]=(0,i.useState)([]),[c,d]=(0,i.useState)(!1),[e,f]=(0,i.useState)(null),[j,k]=(0,i.useState)(""),[l,m]=(0,i.useState)(1),[n,o]=(0,i.useState)(10),[p,q]=(0,i.useState)(null),[r,s]=(0,i.useState)({});(0,i.useEffect)(()=>{!async function(){try{d(!0);let a=await fetch("/api/recipes?page=1&per_page=1000"),c=await a.json();if(!a.ok)throw Error(c.error||"Failed to load recipes");b(c.data||[])}catch(a){f(a.message)}finally{d(!1)}}()},[]);let t=(0,i.useMemo)(()=>a.length?["id",...Object.keys(a[0]).filter(a=>"id"!==a)]:[],[a]),u=(0,i.useMemo)(()=>{if(!j.trim())return a;let b=j.toLowerCase();return a.filter(a=>t.some(c=>{let d=a[c];if(null==d)return!1;if("object"==typeof d)try{return JSON.stringify(d).toLowerCase().includes(b)}catch{return!1}return String(d).toLowerCase().includes(b)}))},[a,t,j]),v=Math.max(1,Math.ceil(u.length/n)),w=(l-1)*n,x=u.slice(w,w+n);function y(a,b,c){s(d=>({...d,[a]:{...d[a]||{},[b]:c}}))}function z(){q(null)}async function A(c){let e=r[c];if(!e)return;let f={};t.forEach(b=>{if("id"===b)return;let d=a.find(a=>a.id===c)?.[b],g=e[b];if("object"==typeof d&&null!==d)try{f[b]=g?JSON.parse(g):null}catch(a){throw alert(`Column "${b}" must be valid JSON.

${a.message}`),a}else if("number"==typeof d){let a=Number(g);if(Number.isNaN(a))throw alert(`Column "${b}" must be a number.`),Error(`Invalid number for ${b}`);f[b]=a}else"boolean"==typeof d?f[b]="true"===g||!0===g:f[b]=g});try{d(!0);let a=await fetch(`/api/recipes/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),e=await a.json();if(!a.ok)throw Error(e.error||"Failed to update recipe");let g=e.data;b(a=>a.map(a=>a.id===c?g:a)),q(null)}catch(a){console.error(a),a.message.startsWith("Invalid")||alert(a.message)}finally{d(!1)}}async function B(a){let b=u.map(b=>{let c=b[a];return"object"==typeof c&&null!==c?c=JSON.stringify(c):null==c&&(c="N/A"),`RECIPE_ID: ${b.id}
${a.toUpperCase()}: ${c}`}).join("\n\n----------------------------------------\n\n");try{await navigator.clipboard.writeText(b),alert(`Copied "${a}" data for ${u.length} recipes to clipboard.

Ready to paste into Chat AI!`)}catch(a){console.error("Failed to copy",a),alert("Failed to copy to clipboard")}}return(0,i.useEffect)(()=>{m(1)},[j,n]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.default,{children:(0,g.jsx)("title",{children:"Recipe Admin"})}),(0,g.jsxs)("section",{className:"vr-admin",children:[(0,g.jsxs)("header",{className:"vr-admin__header",children:[(0,g.jsx)("h1",{className:"vr-admin__title",children:"Recipes Admin"}),(0,g.jsxs)("p",{className:"vr-admin__subtitle",children:["Local-only editor for the ",(0,g.jsx)("code",{children:"recipes"})," table."]})]}),(0,g.jsx)("div",{className:"vr-admin__toolbar",children:(0,g.jsx)("input",{type:"text",className:"vr-admin__search",placeholder:"Search in any column...",value:j,onChange:a=>k(a.target.value)})}),e&&(0,g.jsx)("p",{className:"vr-admin__error",children:e}),c&&!a.length&&(0,g.jsx)("p",{className:"vr-admin__status",children:"Loading recipes..."}),!c&&!a.length&&!e&&(0,g.jsx)("p",{className:"vr-admin__status",children:"No recipes found."}),a.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"vr-admin__table-wrapper",children:(0,g.jsxs)("table",{className:"vr-admin__table",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[t.map(a=>(0,g.jsx)("th",{children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[(0,g.jsx)("span",{children:a}),(0,g.jsx)("button",{type:"button",title:`Copy all ${a} data for AI`,onClick:()=>B(a),style:{background:"none",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"12px",padding:"2px 6px"},children:"ðŸ“‹"})]})},a)),(0,g.jsx)("th",{children:"Actions"})]})}),(0,g.jsx)("tbody",{children:x.map(a=>{let b=a.id===p,d=r[a.id]||{};return(0,g.jsxs)("tr",{className:b?"vr-admin__row--editing":"",children:[t.map(c=>{let e=a[c],f=b?d[c]:"object"==typeof e&&null!==e?JSON.stringify(e):e??"",h="object"==typeof e&&null!==e;return(0,g.jsx)("td",{children:h?(0,g.jsx)("textarea",{className:"vr-admin__input vr-admin__input--textarea",disabled:!b,value:f,onChange:b=>y(a.id,c,b.target.value),rows:4}):(0,g.jsx)("input",{className:"vr-admin__input",type:"text",disabled:!b,value:f,onChange:b=>y(a.id,c,b.target.value)})},c)}),(0,g.jsx)("td",{className:"vr-admin__actions",children:b?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{type:"button",className:"vr-admin__btn",onClick:()=>A(a.id),disabled:c,children:"Save"}),(0,g.jsx)("button",{type:"button",className:"vr-admin__btn",onClick:z,disabled:c,children:"Cancel"})]}):(0,g.jsx)("button",{type:"button",className:"vr-admin__btn",onClick:()=>{let b;return q(a.id),b={},void(t.forEach(c=>{let d=a[c];"object"==typeof d&&null!==d?b[c]=JSON.stringify(d,null,2):null==d?b[c]="":b[c]=String(d)}),s(c=>({...c,[a.id]:b})))},children:"Edit"})})]},a.id)})})]})}),(0,g.jsxs)("div",{className:"vr-admin__pagination",children:[(0,g.jsx)("button",{type:"button",className:"vr-admin__btn",disabled:1===l,onClick:()=>m(a=>Math.max(1,a-1)),children:"Previous"}),(0,g.jsxs)("span",{className:"vr-admin__page-info",children:["Page ",l," of ",v," (",u.length," records)"]}),(0,g.jsxs)("label",{className:"vr-admin__per-page",children:["Per page:",(0,g.jsxs)("select",{value:n,onChange:a=>o(Number(a.target.value)),children:[(0,g.jsx)("option",{value:5,children:"5"}),(0,g.jsx)("option",{value:10,children:"10"}),(0,g.jsx)("option",{value:25,children:"25"}),(0,g.jsx)("option",{value:50,children:"50"})]})]}),(0,g.jsx)("button",{type:"button",className:"vr-admin__btn",disabled:l===v,onClick:()=>m(a=>Math.min(v,a+1)),children:"Next"})]})]})]})]})}async function k(a){return(a.req.headers.host||"").startsWith("localhost"),{notFound:!0}}a.i(57288),a.s(["default",()=>j,"getServerSideProps",()=>k],7076);var l=a.i(7076),m=a.i(9193);let n=(0,d.hoist)(l,"default"),o=(0,d.hoist)(l,"getStaticProps"),p=(0,d.hoist)(l,"getStaticPaths"),q=(0,d.hoist)(l,"getServerSideProps"),r=(0,d.hoist)(l,"config"),s=(0,d.hoist)(l,"reportWebVitals"),t=(0,d.hoist)(l,"unstable_getStaticProps"),u=(0,d.hoist)(l,"unstable_getStaticPaths"),v=(0,d.hoist)(l,"unstable_getStaticParams"),w=(0,d.hoist)(l,"unstable_getServerProps"),x=(0,d.hoist)(l,"unstable_getServerSideProps"),y=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/recipes",pathname:"/admin/recipes",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:l}),z=(0,m.getHandler)({srcPage:"/admin/recipes",config:r,userland:l,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});a.s(["config",0,r,"default",0,n,"getServerSideProps",0,q,"getStaticPaths",0,p,"getStaticProps",0,o,"handler",0,z,"reportWebVitals",0,s,"routeModule",0,y,"unstable_getServerProps",0,w,"unstable_getServerSideProps",0,x,"unstable_getStaticParams",0,v,"unstable_getStaticPaths",0,u,"unstable_getStaticProps",0,t],25854)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_c7643bd0.js.map