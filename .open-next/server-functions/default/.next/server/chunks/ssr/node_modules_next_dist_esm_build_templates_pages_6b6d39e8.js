module.exports=[47948,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(19059),i=a.i(27669),j=a.i(49190),k=a.i(31735),l=a.i(20351),m=a.i(51749);a.i(90664);var n=a.i(10766),o=a.i(58803);async function p(){let a=j.supabase.from("recipes").select("*",{count:"exact"}).order("created_at",{ascending:!1}),{data:b,count:c,error:d}=await a.range(0,23);if(d)return console.error("ISR Error:",d),{notFound:!0};let{data:e}=await j.supabase.from("recipes").select("total_time, cook_time").limit(100);return{props:{initialRecipes:b||[],initialTotalCount:c||0,initialMaxTime:e?Math.max(...e.map(a=>a.total_time||a.cook_time||0)):60},revalidate:n.REVALIDATE_TIME}}function q({initialRecipes:a=[],initialTotalCount:b=0,initialMaxTime:c=60}){let[d,e]=(0,i.useState)(a),[f,j]=(0,i.useState)(b),[p,q]=(0,i.useState)([]),[r,s]=(0,i.useState)({ingredients:[],difficulty:null,maxTime:c}),[t,u]=(0,i.useState)(!1),[v,w]=(0,i.useState)(a.length<b),[x,y]=(0,i.useState)(1),z=(0,i.useRef)(null),A=(0,i.useRef)(null);(0,i.useEffect)(()=>{let a=setTimeout(async function(){if(p.length>0)return;let a=new URLSearchParams;a.set("page",1),a.set("per_page",300);try{let b=await fetch(`/api/recipes?${a.toString()}`),c=(await b.json()).data||[];q(c);let d=Math.max(...c.map(a=>a.total_time||a.cook_time||0));d>r.maxTime&&s(a=>({...a,maxTime:d}))}catch(a){console.error("Failed to load filter data",a)}},500);return()=>clearTimeout(a)},[]);let B=async(a,b=!1)=>{let c;u(!0);let f=((c=new URLSearchParams).set("page",a),c.set("per_page",24),r.ingredients.length>0&&c.set("ingredients",r.ingredients.join(",")),r.difficulty&&c.set("difficulty",r.difficulty),r.maxTime&&c.set("max_time",r.maxTime),c.toString());try{let c=await fetch(`/api/recipes?${f}`),g=await c.json(),h=g.data||[];(b||1===a)&&j(g.total_count||g.count||0),e(a=>b?h:[...a,...h]);let i=b?h.length:d.length+h.length,k=g.total_count||g.count||0;h.length<24||k>0&&i>=k?w(!1):w(!0),y(a)}catch(a){console.error("Failed to fetch recipes",a)}finally{u(!1)}},C=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{if(C.current){C.current=!1;return}e([]),y(1),w(!0),z.current&&z.current.scrollIntoView({behavior:"smooth"}),B(1,!0)},[r]),(0,i.useEffect)(()=>{if(!v||t||!A.current)return;let a=new IntersectionObserver(b=>{let[c]=b;c.isIntersecting&&(a.unobserve(c.target),B(x+1))},{rootMargin:"200px",threshold:.1});return a.observe(A.current),()=>a.disconnect()},[v,t,x,r]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.default,{children:[(0,g.jsxs)("title",{children:[n.BRAND_NAME," — Discover delightful recipes"]}),(0,g.jsx)("meta",{name:"description",content:"Browse our entire collection of delicious recipes. Filter by ingredients, difficulty, and cooking time."})]}),(0,g.jsxs)("div",{className:"vr-category-layout",children:[(0,g.jsx)(m.default,{allRecipes:p,difficultyOptions:["easy","medium","hard"],initialTimeRange:{min:0,max:60},onFilterChange:s}),(0,g.jsxs)("main",{className:"vr-category-main",id:"trending",ref:z,children:[(0,g.jsxs)("div",{className:"vr-category-main__header",children:[(0,g.jsx)("h3",{className:"vr-category__title",children:"All Recipes"}),(0,g.jsx)("span",{className:"vr-category-main__meta",children:f?`${d.length} out of ${f} recipes loaded`:`${d.length} recipes loaded`})]}),(0,g.jsx)("div",{className:"vr-category__grid",children:d.map((a,b)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.default,{recipe:a},a.id),(b+1)%6==0&&(0,g.jsx)("article",{className:"vr-card vr-recipe-card vr-ad-card-wrapper",children:(0,g.jsx)(l.default,{id:"101",position:"in-feed",height:"100%"})})]}))}),v&&(0,g.jsx)("div",{ref:A,className:"vr-infinite-sentinel",children:t&&(0,g.jsx)("span",{children:"Loading more recipes…"})}),!v&&!t&&d.length>0&&(0,g.jsx)("div",{className:"vr-end-message",children:(0,g.jsx)("span",{children:"You've reached the end of the recipes."})}),0===d.length&&!t&&(0,g.jsx)("div",{className:"vr-empty-state",children:(0,g.jsx)("p",{children:"No recipes match these filters yet. Try adjusting them."})})]}),(0,g.jsx)(o.default,{})]})]})}a.s(["default",()=>q,"getStaticProps",()=>p],12720);var r=a.i(12720),s=a.i(9193);let t=(0,d.hoist)(r,"default"),u=(0,d.hoist)(r,"getStaticProps"),v=(0,d.hoist)(r,"getStaticPaths"),w=(0,d.hoist)(r,"getServerSideProps"),x=(0,d.hoist)(r,"config"),y=(0,d.hoist)(r,"reportWebVitals"),z=(0,d.hoist)(r,"unstable_getStaticProps"),A=(0,d.hoist)(r,"unstable_getStaticPaths"),B=(0,d.hoist)(r,"unstable_getStaticParams"),C=(0,d.hoist)(r,"unstable_getServerProps"),D=(0,d.hoist)(r,"unstable_getServerSideProps"),E=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/recipes",pathname:"/recipes",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:r}),F=(0,s.getHandler)({srcPage:"/recipes",config:x,userland:r,routeModule:E,getStaticPaths:v,getStaticProps:u,getServerSideProps:w});a.s(["config",0,x,"default",0,t,"getServerSideProps",0,w,"getStaticPaths",0,v,"getStaticProps",0,u,"handler",0,F,"reportWebVitals",0,y,"routeModule",0,E,"unstable_getServerProps",0,C,"unstable_getServerSideProps",0,D,"unstable_getStaticParams",0,B,"unstable_getStaticPaths",0,A,"unstable_getStaticProps",0,z],47948)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_6b6d39e8.js.map