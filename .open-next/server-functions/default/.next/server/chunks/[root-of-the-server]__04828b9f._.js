module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},94131,(e,t,r)=>{t.exports=e.x("@supabase/supabase-js",()=>require("@supabase/supabase-js"))},56694,e=>{"use strict";var t=e.i(94131);let r="https://hhdwpdvczefdyuynppjk.supabase.co",i=(0,t.createClient)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoZHdwZHZjemVmZHl1eW5wcGprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4Mzk0NzMsImV4cCI6MjA3OTQxNTQ3M30.WkiSvEFwvC9oqPlRV9A3SrawlYuyqWINHkMTiCyrs0I");e.s(["getServerSupabase",0,(e=process.env.SUPABASE_SERVICE_ROLE_KEY)=>(0,t.createClient)(r,e),"supabase",0,i])},17240,e=>{"use strict";var t=e.i(26747),r=e.i(90406),i=e.i(44898),s=e.i(62950),a=e.i(56694);async function n(e,t){let r=(0,a.getServerSupabase)();if("GET"===e.method)try{let{page:i="1",per_page:s="12",cuisine:a,ingredients:n,difficulty:l,max_time:o,match_type:u="all"}=e.query,p=Number(i)||1,d=Number(s)||12,c=r.from("recipes").select("*",{count:"exact"});if(a&&"trending"!==a&&(c=c.ilike("cuisine",`%${a}%`)),e.query.ingredients){let t=e.query.ingredients.split(",").map(e=>e.trim()).filter(Boolean);if(t.length>0)if("any"===u){let e=t.map(e=>`ingredients.cs.${JSON.stringify([{image:e}])}`).join(",");c=c.or(e)}else for(let e of t){let t=JSON.stringify([{image:e}]);c=c.filter("ingredients","cs",t)}}if(l){let e=l.split(",").map(e=>e.trim());c=c.in("difficulty",e)}if(o){let e=Number(o);Number.isNaN(e)||(c=c.lte("total_time",e))}e.query.serving_time&&(c=c.eq("serving_time",e.query.serving_time));let m=(p-1)*d;c=c.range(m,m+d-1);let{data:f,error:g,count:h}=await c;if(g)return t.status(500).json({error:g.message});return t.status(200).json({data:f,total_pages:null!=h?Math.ceil(h/d):1,total_count:h??0})}catch(e){return t.status(500).json({error:e.message})}if("POST"===e.method){if(e.headers["x-api-key"]!==process.env.RECIPE_API_KEY)return t.status(401).json({error:"Unauthorized"});try{let i=e.body,{data:s,error:a}=await r.from("recipes").insert([i]).select();if(a)return t.status(500).json({error:a.message});return t.status(201).json({data:s})}catch(e){return t.status(500).json({error:e.message})}}t.setHeader("Allow",["GET","POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}e.s(["default",()=>n],46974);var l=e.i(46974),o=e.i(7031),u=e.i(81927),p=e.i(46432);let d=(0,s.hoist)(l,"default"),c=(0,s.hoist)(l,"config"),m=new i.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/recipes/index",pathname:"/api/recipes",bundlePath:"",filename:""},userland:l,distDir:".next",relativeProjectDir:""});async function f(e,r,i){m.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let s="/api/recipes/index";s=s.replace(/\/index$/,"")||"/";let a=await m.prepare(e,r,{srcPage:s});if(!a){r.statusCode=400,r.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve());return}let{query:n,params:l,prerenderManifest:d,routerServerContext:c}=a;try{let t=e.method||"GET",i=(0,o.getTracer)(),a=i.getActiveScopeSpan(),p=m.instrumentationOnRequestError.bind(m),f=async a=>m.render(e,r,{query:{...n,...l},params:l,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:d.preview,propagateError:!1,dev:m.isDev,page:"/api/recipes/index",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>p(e,...t)}).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=i.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;a.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),a.updateName(e)}else a.updateName(`${t} ${s}`)});a?await f(a):await i.withPropagatedContext(e.headers,()=>i.trace(u.BaseServerSpan.handleRequest,{spanName:`${t} ${s}`,kind:o.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},f))}catch(e){if(m.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==i.waitUntil||i.waitUntil.call(i,Promise.resolve())}}e.s(["config",0,c,"default",0,d,"handler",()=>f],17240)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__04828b9f._.js.map